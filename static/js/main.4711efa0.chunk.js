(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,a,n){},17:function(e,a,n){},21:function(e,a,n){"use strict";n.r(a);var t=n(0),r=n.n(t),s=n(8),o=n.n(s),i=(n(15),n(2)),l=n(3),c=n(5),u=n(4),m=n(6),d=(n(17),n(19),n(1)),h={8479339:{name:"Patrik Laine"},8479344:{name:"Jesse Puljuj\xe4rvi"},8477493:{name:"Aleksander Barkov"},8478427:{name:"Sebastian Aho"},8476882:{name:"Teuvo Ter\xe4v\xe4inen"},8478420:{name:"Mikko Rantanen"},8469638:{name:"Jussi Jokinen"},8475798:{name:"Mikael Granlund"},8469459:{name:"Mikko Koivu"},8476469:{name:"Joel Armia"},8475287:{name:"Erik Haula"},8475820:{name:"Joonas Donskoi"},8470047:{name:"Valtteri Filppula"},8477476:{name:"Artturi Lehkonen"},8473463:{name:"Leo Komarov"},8477953:{name:"Kasperi Kapanen"},8475222:{name:"Sami Vatanen"},8474627:{name:"Jori Lehter\xe4"},8477499:{name:"Rasmus Ristolainen"},8476874:{name:"Olli M\xe4\xe4tt\xe4"},8476902:{name:"Esa Lindell"},8476440:{name:"Markus Granlund"},8478906:{name:"Markus Nutivaara"},8476447:{name:"Miikka Salom\xe4ki"},8478541:{name:"Markus H\xe4nnik\xe4inen"},8477945:{name:"Julius Honka"},8476336:{name:"Iiro Pakarinen"},8479290:{name:"Kalle Kossila"},8480164:{name:"Henrik Haapala"},8479511:{name:"Janne kuokkanen"},8471469:{name:"Pekka Rinne"},8471695:{name:"Tuukka Rask"},8477293:{name:"Antti Raanta"},8470140:{name:"Kari Lehtonen"},8477424:{name:"Juuse Saros"},8474550:{name:"Antti Niemi"},8476914:{name:"Joonas Korpisalo"},8474667:{name:"Harri S\xe4teri"},8476444:{name:"Christopher Gibson"},8480009:{name:"Eeli Tolvanen"},8479404:{name:"Henrik Borgstr\xf6m"},8478915:{name:"Sami Niku"},8480829:{name:"Jesperi Kotkaniemi"},8479976:{name:"Juuso v\xe4lim\xe4ki"},8480035:{name:"Henri Jokiharju"},8480036:{name:"Miro Heiskanen"},8478449:{name:"Roope Hintz"},8480965:{name:"Antti Suomela"},8480005:{name:"Kristian Vesalainen"},8475156:{name:"Mikko Koskinen"},8477996:{name:"Juho Lammikko"},8477357:{name:"Saku M\xe4enalanen"}},f={FINAL:["6","7"]},v=Object.keys(h),p=new Date;p.setHours(0,0,0,0),p.setDate(p.getDate()-1);var g="stats"+p.getTime()+3,k=function(e){return e<10?"0"+e:""+e},y=function(){var e=function(e){return e.getFullYear()+"-"+k(e.getMonth()+1)+"-"+k(e.getDate())}(p);return fetch("https://statsapi.web.nhl.com/api/v1/schedule?date="+e).then(function(e){return 200!==e.status?Promise.reject():e.json()}).then(function(e){if(0===e.totalGames)return Promise.reject("No games today.");var a=e.dates[0].games,n=[],t=[],r=!0,s=!1,o=void 0;try{for(var i,l=a[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var c=i.value;f.FINAL.includes(c.status.statusCode)?n.push(c.gamePk):t.push(c.gamePk)}}catch(u){s=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(s)throw o}}return n.length>0?Promise.resolve({finished:n,unfinished:t}):Promise.reject("No finished games yet.")},function(e){return Promise.reject("Something went wrong.")})},w=function(e,a,n){return e[a]=Object(d.a)({},e.hasOwnProperty(a)?e[a]:{goals:0,assists:0},{star:n}),e},b=function(e,a){return e[a]=Object(d.a)({},e.hasOwnProperty(a)?e[a]:{goals:0,assists:0,shootOutGoals:0}),e[a].shootOutGoals++,e},O=function(e,a){for(var n=Object.keys(a),t=0;t<n.length;t++){var r=a[n[t]];if("G"===r.position.code&&e.hasOwnProperty(r.person.id)&&void 0!==e[r.person.id].star){var s=r.stats.goalieStats,o=s.saves,i=s.shots;o&&i&&(e[r.person.id]=Object(d.a)({},e[r.person.id],{goals:0,assists:0,saves:o,shots:i}))}else if(["C","L","R","D"].includes(r.position.code)){var l=r.stats.skaterStats,c=l.goals,u=l.assists;if(c||u){var m=e.hasOwnProperty(r.person.id)?e[r.person.id]:{};e[r.person.id]=Object(d.a)({},m,{goals:c,assists:u})}}}return e},S=function(e){return g+e.length},E=function(){var e=S([]);if(localStorage.getItem(e)){var a=JSON.parse(localStorage.getItem(e));return Promise.resolve(a)}var n=[];return y().then(function(e){n=e.unfinished;var a,t=S(n);return localStorage.getItem(t)?JSON.parse(localStorage.getItem(t)):(a=e.finished,new Promise(function(e,n){var t=0,r={},s=!0,o=!1,i=void 0;try{for(var l,c=a[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var u=l.value;fetch("https://statsapi.web.nhl.com/api/v1/game/[GAME_PK]/feed/live".replace(/\[GAME_PK\]/,u)).then(function(e){return e.json()}).then(function(n){t++;var s=n.liveData.decisions,o=s.firstStar,i=s.secondStar,l=s.thirdStar;o&&i&&l&&(r=w(r,o.id,1),r=w(r,i.id,2),r=w(r,l.id,3));var c=n.liveData.plays,u=!0,m=!1,d=void 0;try{for(var h,f=c.scoringPlays[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var v=h.value,p=c.allPlays[v];if("SHOOTOUT"===p.about.periodType&&"GOAL"===p.result.eventTypeId){var g=p.players.filter(function(e){return"Scorer"===e.playerType}).pop().player.id;b(r,g)}}}catch(E){m=!0,d=E}finally{try{u||null==f.return||f.return()}finally{if(m)throw d}}var k=n.liveData.boxscore.teams,y=k.away,S=k.home;r=O(r,y.players),r=O(r,S.players),t===a.length&&e(r)},function(e){n("Something went wrong.")})}}catch(m){o=!0,i=m}finally{try{s||null==c.return||c.return()}finally{if(o)throw i}}})).then(function(e){return function(e){for(var a=[],n=0;n<v.length;n++){var t=v[n];e.hasOwnProperty(t)&&a.push(Object(d.a)({},e[t],{playerId:t}))}return a}(e)}).then(function(e){return function(e){return e.sort(function(e,a){return e.star||a.star?(e.star?e.star:4)-(a.star?a.star:4):a.goals-e.goals!==0?a.goals-e.goals:a.assists-e.assists!==0?a.assists-e.assists:0})}(e)}).then(function(e){return localStorage.setItem(t,JSON.stringify({stats:e,unfinishedGames:n})),{stats:e,unfinishedGames:n}})})},j=function(e){return"https://nhl.bamcontent.com/images/headshots/current/60x60/[PLAYER_ID]@2x.jpg".replace(/\[PLAYER_ID\]/,e)},N=function(e){return h[e]},P=function(e){function a(e){var n;return Object(i.a)(this,a),(n=Object(c.a)(this,Object(u.a)(a).call(this,e))).state={statsReady:!1,data:{stats:[],unfinishedGames:[]}},n}return Object(m.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;0===this.state.data.stats.length&&E().then(function(a){e.setState({statsReady:!0,data:a})}).catch(function(a){e.setState({statsReady:!0,message:a})})}},{key:"render",value:function(){var e=this.state,a=e.statsReady,n=e.message,t=this.state.data,s=t.stats,o=t.unfinishedGames;return a?n?r.a.createElement("span",null,n):r.a.createElement("div",null,r.a.createElement("div",{className:"stats"},s.map(function(e){var a,n=e.playerId,t=e.goals,s=void 0===t?null:t,o=e.assists,i=void 0===o?null:o,l=e.shootOutGoals,c=void 0===l?null:l,u=e.saves,m=void 0===u?null:u,d=e.shots,h=void 0===d?null:d,f=e.star,v=void 0===f?null:f,p="";return s||i||c?p=r.a.createElement("div",{className:"card__points"+(c?" card__points--has-shootout-goals":"")},s+" + "+i,c&&r.a.createElement("span",{className:"card__shoot-out-goals",title:"Shootout goals"},"\xa0",r.a.createElement("span",null,"(+",c,")"))):m&&h&&(p=r.a.createElement("div",{className:"card__points"},m+" / "+h)),r.a.createElement("div",{key:n,className:"card-container"},r.a.createElement("a",{href:(a=N(n).name,"https://www.youtube.com/results?search_query=[QUERY]".replace(/\[QUERY\]/,a.replace(/\s/,"+"))),className:"player-link",target:"_blank"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card__player"},r.a.createElement("img",{src:j(n),className:"card__headshot",alt:N(n).name,title:N(n).name})),p,v&&r.a.createElement("i",{className:"fa fa-star card__star",title:v},r.a.createElement("span",{className:"card__star-value"},v)))))})),o.length>0&&r.a.createElement("span",null,o.length," games not finished yet.")):r.a.createElement("span",null,"Loading...")}}]),a}(t.Component),_=function(e){function a(){return Object(i.a)(this,a),Object(c.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(P,null))}}]),a}(t.Component),J=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function R(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(_,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/nhl",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/nhl","/service-worker.js");J?(function(e){fetch(e).then(function(a){404===a.status||-1===a.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):R(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):R(e)})}}()},9:function(e,a,n){e.exports=n(21)}},[[9,2,1]]]);
//# sourceMappingURL=main.4711efa0.chunk.js.map