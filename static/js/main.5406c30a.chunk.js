(this.webpackJsonpnhl=this.webpackJsonpnhl||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(7),o=n.n(s),i=(n(14),n(1)),l=n(2),c=n(4),u=n(3),m=n(5),h=(n(15),n(16),n(8)),f={8479339:{name:"Patrik Laine"},8479344:{name:"Jesse Puljuj\xe4rvi"},8477493:{name:"Aleksander Barkov"},8478427:{name:"Sebastian Aho"},8476882:{name:"Teuvo Ter\xe4v\xe4inen"},8478420:{name:"Mikko Rantanen"},8469638:{name:"Jussi Jokinen"},8475798:{name:"Mikael Granlund"},8469459:{name:"Mikko Koivu"},8476469:{name:"Joel Armia"},8475287:{name:"Erik Haula"},8475820:{name:"Joonas Donskoi"},8470047:{name:"Valtteri Filppula"},8477476:{name:"Artturi Lehkonen"},8473463:{name:"Leo Komarov"},8477953:{name:"Kasperi Kapanen"},8475222:{name:"Sami Vatanen"},8474627:{name:"Jori Lehter\xe4"},8477499:{name:"Rasmus Ristolainen"},8476874:{name:"Olli M\xe4\xe4tt\xe4"},8476902:{name:"Esa Lindell"},8476440:{name:"Markus Granlund"},8478906:{name:"Markus Nutivaara"},8476447:{name:"Miikka Salom\xe4ki"},8478541:{name:"Markus H\xe4nnik\xe4inen"},8477945:{name:"Julius Honka"},8476336:{name:"Iiro Pakarinen"},8479290:{name:"Kalle Kossila"},8480164:{name:"Henrik Haapala"},8479511:{name:"Janne kuokkanen"},8471469:{name:"Pekka Rinne"},8471695:{name:"Tuukka Rask"},8477293:{name:"Antti Raanta"},8470140:{name:"Kari Lehtonen"},8477424:{name:"Juuse Saros"},8474550:{name:"Antti Niemi"},8476914:{name:"Joonas Korpisalo"},8474667:{name:"Harri S\xe4teri"},8476444:{name:"Christopher Gibson"},8480009:{name:"Eeli Tolvanen"},8479404:{name:"Henrik Borgstr\xf6m"},8478915:{name:"Sami Niku"},8480829:{name:"Jesperi Kotkaniemi"},8479976:{name:"Juuso v\xe4lim\xe4ki"},8480035:{name:"Henri Jokiharju"},8480036:{name:"Miro Heiskanen"},8478449:{name:"Roope Hintz"},8480965:{name:"Antti Suomela"},8480005:{name:"Kristian Vesalainen"},8475156:{name:"Mikko Koskinen"},8477996:{name:"Juho Lammikko"},8477357:{name:"Saku M\xe4enalanen"},8481572:{name:"Ville Heinola"},8481554:{name:"Kaapo Kakko"}};function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach((function(t){Object(h.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v={FINAL:["6","7"]},g=Object.keys(f),y=new Date;y.setHours(0,0,0,0),y.setDate(y.getDate()-1);var k="stats"+y.getTime()+3,w=function(e){return e<10?"0"+e:""+e},O=function(){var e=function(e){return e.getFullYear()+"-"+w(e.getMonth()+1)+"-"+w(e.getDate())}(y);return fetch("https://statsapi.web.nhl.com/api/v1/schedule?date="+e).then((function(e){return 200!==e.status?Promise.reject():e.json()})).then((function(e){if(0===e.totalGames)return Promise.reject("No games today.");var t=e.dates[0].games,n=[],a=[],r=!0,s=!1,o=void 0;try{for(var i,l=t[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var c=i.value;v.FINAL.includes(c.status.statusCode)?n.push(c.gamePk):a.push(c.gamePk)}}catch(u){s=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(s)throw o}}return n.length>0?Promise.resolve({finished:n,unfinished:a}):Promise.reject("No finished games yet.")}),(function(e){return Promise.reject("Something went wrong.")}))},b=function(e,t,n){return e[t]=p({},e.hasOwnProperty(t)?e[t]:{goals:0,assists:0},{star:n}),e},S=function(e,t){return e[t]=p({},e.hasOwnProperty(t)?e[t]:{goals:0,assists:0,shootOutGoals:0}),e[t].shootOutGoals++,e},j=function(e,t){for(var n=0,a=Object.keys(t);n<a.length;n++){var r=t[a[n]];if("G"===r.position.code&&e.hasOwnProperty(r.person.id)&&void 0!==e[r.person.id].star){var s=r.stats.goalieStats,o=s.saves,i=s.shots;o&&i&&(e[r.person.id]=p({},e[r.person.id],{goals:0,assists:0,saves:o,shots:i}))}else if(["C","L","R","D"].includes(r.position.code)){var l=r.stats.skaterStats,c=l.goals,u=l.assists;if(c||u){var m=e.hasOwnProperty(r.person.id)?e[r.person.id]:{};e[r.person.id]=p({},m,{goals:c,assists:u})}}}return e},E=function(e){return k+e.length},P=function(){var e=E([]);if(localStorage.getItem(e)){var t=JSON.parse(localStorage.getItem(e));return Promise.resolve(t)}var n=[];return O().then((function(e){n=e.unfinished;var t,a=E(n);return localStorage.getItem(a)?JSON.parse(localStorage.getItem(a)):(t=e.finished,new Promise((function(e,n){var a=0,r={},s=!0,o=!1,i=void 0;try{for(var l,c=t[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var u=l.value;fetch("https://statsapi.web.nhl.com/api/v1/game/[GAME_PK]/feed/live".replace(/\[GAME_PK\]/,u)).then((function(e){return e.json()})).then((function(n){a++;var s=n.liveData.decisions,o=s.firstStar,i=s.secondStar,l=s.thirdStar;o&&i&&l&&(r=b(r,o.id,1),r=b(r,i.id,2),r=b(r,l.id,3));var c=n.liveData.plays,u=!0,m=!1,h=void 0;try{for(var f,d=c.scoringPlays[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var p=f.value,v=c.allPlays[p];if("SHOOTOUT"===v.about.periodType&&"GOAL"===v.result.eventTypeId){var g=v.players.filter((function(e){return"Scorer"===e.playerType})).pop().player.id;S(r,g)}}}catch(O){m=!0,h=O}finally{try{u||null==d.return||d.return()}finally{if(m)throw h}}var y=n.liveData.boxscore.teams,k=y.away,w=y.home;r=j(r,k.players),r=j(r,w.players),a===t.length&&e(r)}),(function(e){n("Something went wrong.")}))}}catch(m){o=!0,i=m}finally{try{s||null==c.return||c.return()}finally{if(o)throw i}}}))).then((function(e){return function(e){var t=[],n=!0,a=!1,r=void 0;try{for(var s,o=g[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var i=s.value;e.hasOwnProperty(i)&&t.push(p({},e[i],{playerId:i}))}}catch(l){a=!0,r=l}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}return t}(e)})).then((function(e){return function(e){return e.sort((function(e,t){return e.star||t.star?(e.star?e.star:4)-(t.star?t.star:4):t.goals-e.goals!==0?t.goals-e.goals:t.assists-e.assists!==0?t.assists-e.assists:0}))}(e)})).then((function(e){return localStorage.setItem(a,JSON.stringify({stats:e,unfinishedGames:n})),{stats:e,unfinishedGames:n}}))}))},N=function(e){return"https://nhl.bamcontent.com/images/headshots/current/60x60/[PLAYER_ID]@2x.jpg".replace(/\[PLAYER_ID\]/,e)},_=function(e){return f[e]},J=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={statsReady:!1,data:{stats:[],unfinishedGames:[]}},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;0===this.state.data.stats.length&&P().then((function(t){e.setState({statsReady:!0,data:t})})).catch((function(t){e.setState({statsReady:!0,message:t})}))}},{key:"render",value:function(){var e=this.state,t=e.statsReady,n=e.message,a=this.state.data,s=a.stats,o=a.unfinishedGames;return t?n?r.a.createElement("span",null,n):r.a.createElement("div",null,r.a.createElement("div",{className:"stats"},s.map((function(e){var t,n=e.playerId,a=e.goals,s=void 0===a?null:a,o=e.assists,i=void 0===o?null:o,l=e.shootOutGoals,c=void 0===l?null:l,u=e.saves,m=void 0===u?null:u,h=e.shots,f=void 0===h?null:h,d=e.star,p=void 0===d?null:d,v="";return s||i||c?v=r.a.createElement("div",{className:"card__points"+(c?" card__points--has-shootout-goals":"")},s+" + "+i,c&&r.a.createElement("span",{className:"card__shoot-out-goals",title:"Shootout goals"},"\xa0",r.a.createElement("span",null,"(+",c,")"))):m&&f&&(v=r.a.createElement("div",{className:"card__points"},m+" / "+f)),r.a.createElement("div",{key:n,className:"card-container"},r.a.createElement("a",{href:(t=_(n).name,"https://www.youtube.com/results?search_query=[QUERY]".replace(/\[QUERY\]/,t.replace(/\s/,"+"))),className:"player-link",target:"_blank"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card__player"},r.a.createElement("img",{src:N(n),className:"card__headshot",alt:_(n).name,title:_(n).name})),v,p&&r.a.createElement("i",{className:"fa fa-star card__star",title:p},r.a.createElement("span",{className:"card__star-value"},p)))))}))),o.length>0&&r.a.createElement("span",null,o.length," games not finished yet.")):r.a.createElement("span",null,"Loading...")}}]),t}(a.Component),R=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(J,null))}}]),t}(a.Component),D=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function L(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(R,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/nhl",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/nhl","/service-worker.js");D?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):L(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):L(e)}))}}()},9:function(e,t,n){e.exports=n(17)}},[[9,1,2]]]);
//# sourceMappingURL=main.5406c30a.chunk.js.map